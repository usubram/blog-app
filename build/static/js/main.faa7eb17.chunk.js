(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{17:function(e,t,a){e.exports=a(29)},22:function(e){e.exports=JSON.parse("{}")},28:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(15),r=a(7);var o=({title:e,story:t,handleEdit:a,handleDelete:n})=>{return l.a.createElement("div",{class:"post-row"},l.a.createElement("h3",{class:"post-title",id:t.id},t.title),l.a.createElement("div",{class:"post-time"},(c=t.timestamp,new Date(c).toLocaleDateString())),l.a.createElement("p",{class:"post-text"},t.text),l.a.createElement("a",{href:"#",id:"edit-"+t.id,onClick:()=>a(t)},"Edit"),l.a.createElement("a",{href:"#",id:"delete-"+t.id,onClick:()=>n(t)},"Delete"));var c};a(22);var i=(e,t)=>setTimeout(()=>{fetch("http://restedblog.herokuapp.com/umasubramanian/api/").then(e=>e.json()).then(t=>e(t))},t||100),s=(e,t,a)=>setTimeout(()=>{fetch("http://restedblog.herokuapp.com/umasubramanian/api/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:e.title,text:e.text})}).then(e=>e.json()).then(e=>t(e))},a||100),u=(e,t,a)=>setTimeout(()=>{fetch("http://restedblog.herokuapp.com/umasubramanian/api/".concat(e.id),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>t(e))},a||100),d=(e,t,a)=>setTimeout(()=>{fetch("http://restedblog.herokuapp.com/umasubramanian/api/".concat(e.id),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:e.title,text:e.text})}).then(e=>e.json()).then(e=>t(e))},a||100);const p=l.a.createContext();var m=(e=[],{type:t,value:a})=>{switch(t){case"FETCH_STORIES":return a.sort((e,t)=>new Date(t.timestamp).valueOf()-new Date(e.timestamp).valueOf());case"UPDATE_STORY":let t=e.filter(e=>e.id===a.id);return t=a,e;case"ADD_STORY":return[a,...e];case"DELETE_STORY":return e.filter(e=>e.id!==a.id);default:return e}};var E=({story:e,handleCancel:t,handleUpdate:a})=>l.a.createElement("div",{class:"post-edit-body"},l.a.createElement("h2",null,"Edit Post"),l.a.createElement("h3",null,e.title),l.a.createElement("textarea",{class:"edit-post-txt",onChange:t=>{e.text=t.target.value}},e.text),l.a.createElement("button",{onClick:()=>a(e)},"Update"),l.a.createElement("button",{onClick:t},"Cancel"));var h=({handleCancel:e,handleSave:t})=>{let a={id:"",timestamp:(new Date).toISOString(),title:"",text:""};return l.a.createElement("div",{class:"post-edit-body"},l.a.createElement("h2",null,"Create a new post"),l.a.createElement("lable",{for:"create-new-title"},"Title:"),l.a.createElement("input",{class:"create-new-title",id:"create-new-title",type:"text",onChange:e=>{a.title=e.target.value}}),l.a.createElement("lable",{for:"create-new-title"},"Body:"),l.a.createElement("textarea",{class:"create-new-text",onChange:e=>{a.text=e.target.value}}),l.a.createElement("button",{onClick:()=>{s(a,e=>{t(e)})}},"Save"),l.a.createElement("button",{onClick:e},"Cancel"))},v=a(1);var b=({setShouldUpdate:e})=>{const t=Object(n.useContext)(p),a=t.value,c=void 0===a?[]:a,i=t.dispatch,s=Object(n.useState)(!1),m=Object(r.a)(s,2),b=m[0],O=m[1],f=Object(n.useState)(!1),S=Object(r.a)(f,2),y=S[0],C=S[1],T=Object(n.useState)({}),j=Object(r.a)(T,2),g=j[0],x=j[1];function D(e){x(e),O(!0)}function w(e){O(!1),C(!1)}function k(e){((e,t)=>{u(e,()=>{t({type:"DELETE_STORY",value:e})})})(e,i)}return y?l.a.createElement(h,{handleSave:function(t){C(!1),e(!1),i({type:"ADD_STORY",value:t})},handleCancel:w}):b?(console.log("currentPost",g),l.a.createElement(E,{story:g,handleUpdate:function(e){console.log("update",e),((e,t)=>{d(e,e=>{t({type:"UPDATE_STORY",value:e})})})(e,i),O(!1)},handleCancel:w})):l.a.createElement(v.a,{path:"/"},l.a.createElement("div",{class:"post-body"},l.a.createElement("a",{href:"#",onClick:()=>{C(!0)}},"Create new post"),c.map(e=>l.a.createElement(o,{key:e.id,story:e,handleEdit:D,handleDelete:k}))))};var O=({stories:e=[]})=>l.a.createElement("div",{class:"post-nav"},l.a.createElement("h3",null,"Past Posts"),e.map(e=>{return l.a.createElement("a",{href:"#"+e.id,key:e.id},(t=e.timestamp,new Date(t).toLocaleDateString())," - ",e.title);var t}));var f=()=>{const e=Object(n.useReducer)(m,[]),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(r.a)(o,2),u=s[0],d=s[1];return Object(n.useEffect)(()=>{(e=>{i(t=>{e({type:"FETCH_STORIES",value:t})})})(c)},[u]),l.a.createElement(p.Provider,{value:{value:a,dispatch:c}},l.a.createElement("div",{class:"layout"},l.a.createElement(b,{stories:a,setShouldUpdate:d}),l.a.createElement(O,{stories:a})))};a(28);var S=()=>l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("h1",null,"My Blog")),l.a.createElement("hr",null),l.a.createElement(f,null)),y=a(10);Object(c.render)(l.a.createElement(y.a,null,l.a.createElement(v.c,null,l.a.createElement(S,null))),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.faa7eb17.chunk.js.map